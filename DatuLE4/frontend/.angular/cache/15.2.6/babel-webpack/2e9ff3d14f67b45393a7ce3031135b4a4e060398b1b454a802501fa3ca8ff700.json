{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/auth.service\";\nimport * as i2 from \"src/app/services/token-storage.service\";\nimport * as i3 from \"@angular/common/http\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nexport class LoginPageComponent {\n  constructor(authService, tokenStorage, http, router) {\n    this.authService = authService;\n    this.tokenStorage = tokenStorage;\n    this.http = http;\n    this.router = router;\n    this.form = {\n      username: null,\n      password: null\n    };\n  }\n  ngOnInit() {\n    if (this.tokenStorage.getToken()) {\n      this.authService.isLoggedIn = true;\n      this.router.navigate([this.authService.redirectUrl]);\n    }\n  }\n  onSubmit() {\n    const {\n      username,\n      password\n    } = this.form;\n    this.http.post(\"https://localhost:7000/api/Login/login\", {\n      username,\n      password\n    }).subscribe(data => {\n      this.tokenStorage.saveToken(data.id_token);\n      this.tokenStorage.saveUser(data.id);\n      this.router.navigate([this.authService.redirectUrl]);\n      window.location.reload();\n    });\n  }\n}\nLoginPageComponent.ɵfac = function LoginPageComponent_Factory(t) {\n  return new (t || LoginPageComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.TokenStorageService), i0.ɵɵdirectiveInject(i3.HttpClient), i0.ɵɵdirectiveInject(i4.Router));\n};\nLoginPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginPageComponent,\n  selectors: [[\"app-login-page\"]],\n  decls: 20,\n  vars: 2,\n  consts: [[\"name\", \"form\", \"novalidate\", \"\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [\"for\", \"username\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"username\", 3, \"ngModel\", \"ngModelChange\"], [\"username\", \"ngModel\"], [\"for\", \"password\"], [\"type\", \"password\", \"name\", \"password\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"password\", \"ngModel\"], [\"href\", \" \"]],\n  template: function LoginPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\")(1, \"body\")(2, \"div\")(3, \"h1\");\n      i0.ɵɵtext(4, \"Welcome Back\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"h3\");\n      i0.ɵɵtext(6, \"Login Here\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"form\", 0, 1);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginPageComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(9, \"label\", 2);\n      i0.ɵɵtext(10, \"Email\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 3, 4);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginPageComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.form.username = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"label\", 5);\n      i0.ɵɵtext(14, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"input\", 6, 7);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginPageComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.form.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"a\", 8)(18, \"button\");\n      i0.ɵɵtext(19, \"Submit\");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.form.username);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.form.password);\n    }\n  },\n  dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.NgModel, i5.NgForm],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;AAWA,OAAM,MAAOA,kBAAkB;EAM7BC,YACUC,WAAwB,EACxBC,YAAiC,EACjCC,IAAgB,EAChBC,MAAc;IAHd,gBAAW,GAAXH,WAAW;IACX,iBAAY,GAAZC,YAAY;IACZ,SAAI,GAAJC,IAAI;IACJ,WAAM,GAANC,MAAM;IAThB,SAAI,GAAQ;MACVC,QAAQ,EAAE,IAAI;MACdC,QAAQ,EAAE;KACX;EAM2B;EAE5BC,QAAQ;IACN,IAAI,IAAI,CAACL,YAAY,CAACM,QAAQ,EAAE,EAAE;MAChC,IAAI,CAACP,WAAW,CAACQ,UAAU,GAAG,IAAI;MAClC,IAAI,CAACL,MAAM,CAACM,QAAQ,CAAC,CAAC,IAAI,CAACT,WAAW,CAACU,WAAW,CAAC,CAAC;;EAExD;EAEEC,QAAQ;IACN,MAAM;MAACP,QAAQ;MAAEC;IAAQ,CAAC,GAAG,IAAI,CAACO,IAAI;IAEtC,IAAI,CAACV,IAAI,CAACW,IAAI,CAAgB,wCAAwC,EAAE;MAACT,QAAQ;MAAEC;IAAQ,CAAC,CAAC,CAACS,SAAS,CAACC,IAAI,IAAE;MAC5G,IAAI,CAACd,YAAY,CAACe,SAAS,CAACD,IAAI,CAACE,QAAQ,CAAC;MAC1C,IAAI,CAAChB,YAAY,CAACiB,QAAQ,CAACH,IAAI,CAACI,EAAE,CAAC;MACnC,IAAI,CAAChB,MAAM,CAACM,QAAQ,CAAC,CAAC,IAAI,CAACT,WAAW,CAACU,WAAW,CAAC,CAAC;MACpDU,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;IAC1B,CAAC,CAAC;EACJ;;AA5BSxB,kBAAkB;mBAAlBA,kBAAkB;AAAA;AAAlBA,kBAAkB;QAAlBA,kBAAkB;EAAAyB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCT/BC,4BAAM;MAGMA,4BAAY;MAAAA,iBAAK;MACrBA,0BAAI;MAAAA,0BAAU;MAAAA,iBAAK;MAEnBA,kCAAiE;MAA/CA;QAAA,OAAYC,cAAU;MAAA,EAAC;MAEjCD,gCAAsB;MAAAA,sBAAK;MAAAA,iBAAQ;MACnCA,oCAKwB;MADpBA;QAAA;MAAA,EAA2B;MAJ/BA,iBAKwB;MAExBA,iCAAsB;MAAAA,yBAAQ;MAAAA,iBAAQ;MACtCA,oCAKwB;MAFpBA;QAAA;MAAA,EAA2B;MAH/BA,iBAKwB;MAE5BA,6BAAY;MACAA,uBAAM;MAAAA,iBAAS;;;MAZnBA,gBAA2B;MAA3BA,2CAA2B;MAO3BA,eAA2B;MAA3BA,2CAA2B","names":["LoginPageComponent","constructor","authService","tokenStorage","http","router","username","password","ngOnInit","getToken","isLoggedIn","navigate","redirectUrl","onSubmit","form","post","subscribe","data","saveToken","id_token","saveUser","id","window","location","reload","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\hp\\source\\repos\\datu-LE\\DatuLE4\\frontend\\src\\app\\components\\login-page\\login-page.component.ts","C:\\Users\\hp\\source\\repos\\datu-LE\\DatuLE4\\frontend\\src\\app\\components\\login-page\\login-page.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { TokenStorageService } from 'src/app/services/token-storage.service';\n\n@Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.css']\n})\nexport class LoginPageComponent implements OnInit{\n  form: any = {\n    username: null,\n    password: null\n  }\n\n  constructor (\n    private authService: AuthService,\n    private tokenStorage: TokenStorageService,\n    private http: HttpClient,\n    private router: Router) { }\n\n  ngOnInit(): void {\n    if (this.tokenStorage.getToken()) {\n      this.authService.isLoggedIn = true;\n      this.router.navigate([this.authService.redirectUrl])\n    }\n  }\n\n    onSubmit(){\n      const {username, password} = this.form;\n\n      this.http.post<LoginPostData>(\"https://localhost:7000/api/Login/login\", {username, password}).subscribe(data=>{\n        this.tokenStorage.saveToken(data.id_token);\n        this.tokenStorage.saveUser(data.id);\n        this.router.navigate([this.authService.redirectUrl]);\n        window.location.reload();\n      })\n    }\n\n  }\n  \n  export interface LoginPostData {\n    id_token: string;\n    id: number;\n  } \n","<!DOCTYPE html>\n\n<html>\n<body>\n    <div>\n        <h1>Welcome Back</h1>\n        <h3>Login Here</h3>\n    \n        <form name=\"form\" (ngSubmit)=\"onSubmit()\" #f=\"ngForm\" novalidate>\n            \n                <label for=\"username\">Email</label>\n                <input\n                    required\n                    type=\"text\"\n                    name=\"username\"\n                    [(ngModel)]=\"form.username\"\n                    #username=\"ngModel\">\n    \n                <label for=\"password\">Password</label>\n                <input \n                    type=\"password\"\n                    name=\"password\"\n                    [(ngModel)]=\"form.password\"\n                    required\n                    #password=\"ngModel\">\n\n            <a href=\" \">\n                <button>Submit</button>\n            </a>\n        </form>\n    </div>\n</body>\n</html>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}